@if (loading) {
  <div>Loading top players...</div>
} @else if (error) {
  <div>{{ error }}</div>
} @else {
  @if (topByClass.length) {
    <div class="class-grid">
      <div class="class-card" *ngFor="let group of topByClass; trackBy: trackByClass">
        <h3>{{ group.className || ('Class ' + group.classId) }}</h3>
        <ul>
          <li *ngFor="let p of group.players; let i = index">
            <span>#{{ p?.rank ?? '—' }}</span>
            <span>{{ p?.character?.name ?? 'Unknown' }}</span>
            <span>{{ p?.rating ?? '—' }}</span>
          </li>
        </ul>
      </div>
    </div>
  } @else {
    <div>No data.</div>
  }
}