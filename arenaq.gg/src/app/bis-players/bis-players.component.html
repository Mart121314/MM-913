<h3>Top Players by Class</h3>

@if (error) {
  <div class="error">{{ error }}</div>
}

@if (vm$ | async; as vm) {
  <p class="filters">
    Showing <strong>{{ vm.filters.classSlug ?? 'all classes' }}</strong>
  </p>

  @if (vm.groups.length) {
    @for (group of vm.groups; track group.classId) {
      <section class="class-block">
        <h4>{{ group.className }}</h4>
        <ul>
          @for (player of group.players; track player?.character?.id ?? player?.character?.name ?? player?.name) {
            <li>
              {{ player?.character?.name ?? 'Unknown' }}
              <span>({{ player?.character?.realm?.slug ?? '?' }})</span>
              <span>- {{ player?.rating ?? '-' }} rating</span>
            </li>
          }
        </ul>
      </section>
    }
  } @else if (!error) {
    <div>No player data available.</div>
  }
} @else if (!error) {
  <div>Loading players...</div>
}
